**比赛场次**  星码StarryCoding 入门教育赛4

**比赛题目  ** E

<!--more-->

1 seconds / 256 megabytes

standard input / standard output

## 题目

*Piper*近日又开始研究上了多项式，但是这次𝑃𝑖𝑝𝑒𝑟研究的多项式并非普通的多项式了。

我们知道，一元𝑛次多项式可以用如下的表达式来表示：
$$
𝑓(𝑥)=𝑎^𝑛𝑥^𝑛+𝑎^{𝑛−1}𝑥^{𝑛−1}+…+𝑎^1𝑥+𝑎^0,𝑎𝑛≠0
$$
其中𝑎𝑖𝑥𝑖称为𝑖次项，𝑎𝑖称为𝑖次项的系数。

为了有趣一些，𝑃𝑖𝑝𝑒𝑟规定：一个由不同非负整数组成的数组𝑏，由这个数组𝑏中所有元素得到一个多项式，其中𝑏𝑖次项的系数为1，将一个正数𝑛代入这个多项式得到的计算结果是特殊数。

换句话说，如果一个正数可以写成 𝑛 的**不同**非负幂的和，我们就称它为特殊数。例如，对于 𝑛=4 来说，数字 17 是特殊的，因为它可以写成 4^0+4^2=1+16=17，但 9 不是。

但是𝑃𝑖𝑝𝑒𝑟懒惰的毛病又犯了，可是他又想快速地找到按递增顺序排列的 𝑘 这个特殊的数字。请你写个程序来帮助𝑃𝑖𝑝𝑒𝑟。因为这个数可能太大，所以输出它的模数 1e9+7 。

## 输入

第一行包含一个整数 𝑡 ( 1≤𝑡≤1e4 ) - 测试用例数。

每个测试用例的第一行，也是唯一一行，包含两个整数 𝑛 和 𝑘（ 2≤𝑛≤1e9 ; 1≤𝑘≤1e9 ）。

## 输出

对于每个测试用例，打印一个整数——以 1e9+7为模数依次递增的 𝑘 -th 特殊数。

## 样例

**输入**

> 3 
>
> 3 4 
>
> 2 12 
>
> 105 564

**输出**

> 9 
>
> 12 
>
> 3595374

## 解释

对于第一组测试样例：𝑛=3时的递增序列为：[1,3,4,9…]，第四个数字为9。

## 题解

##### **官方题解**

##### 【**数学**】

对于大于2的𝑛，
$$
𝑛^{𝑥+1}<𝑛^𝑥+𝑛^{𝑥−1}+…+𝑛^1+𝑛^0；
$$
对于𝑛=2，也就是二进制数，第𝑘大的数字就是𝑘，也就是𝑘的二进制数上每一位乘上对应的2的幂次。

而对于𝑛，𝑛>2上面规则同样适用。所以可以<u>将𝑘用二进制的方式表示出来，然后将𝑘的二进制上的1乘上对应𝑛的幂次即可得到答案</u>。

由于前面的系数都为1，就类似于二进制，三进制，……，十进制，……的底层表示。

## 代码

**我的赛后代码**

```c++
#include <bits/stdc++.h>
using namespace std;
using ll = long long;
const ll p = 1e9 + 7;
void solve()
{
	ll n,k;cin >> n >> k;
	vector<int> v;
	while(k)
	{
		v.push_back(k&1);
		k >>= 1;
	}
	ll base = 1;
	ll ans = 0;
	for(auto &i :v)
	{
		if(i) ans = (ans + base) % p;
		base = base * n % p;
	}
	cout << ans << '\n';
}
int main()
{
	ios::sync_with_stdio(0),cin.tie(0),cout.tie(0);
	int _;cin >> _;
	while(_ --)
	{
		solve();
	}
	return 0;
}
```

##### **官方题解代码**

```c++
#include<bits/stdc++.h>
using namespace std;
using ll = long long;
const int p = 1e9 + 7;

void solve()
{
    ll n, k; cin >> n >> k;
    ll temp = 1;
    ll ans = 0;
    for(int i = 0; i < 31; ++i)
    {
        if(k & (1 << i))
        {
            ans = (ans + temp) % p;
        }
        temp *= n;
        temp %= p;
    }

    cout << ans << '\n';
}

int main()
{
    ios::sync_with_stdio(0), cin.tie(0), cout.tie(0);
    int _; cin >> _;
    while(_--) solve();
    return 0;
}
```

